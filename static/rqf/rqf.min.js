/*! = JS built 2021-12-02 13:56:37 = */function go(){"object"==typeof Prototype&&jQuery.noConflict();jQuery(document).ready(function(a){function b(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function c(a){var b=document.head,c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b.appendChild(c)}var d=a(window),e=a("html"),f=a("#mdcolumn"),g="yorkfestivalofideas.com"===window.location.hostname||window.location.pathname.indexOf("foi-rqf-test")>-1,h="yorkconcerts.co.uk"===window.location.hostname||0===window.location.pathname.indexOf("/concerts/"),i=window.location.pathname.indexOf("/students/")>-1||window.location.pathname.indexOf("/staff/")>-1||window.location.hostname.indexOf("cmstest")>-1,j=function(){this.status=!1,this.contentUpdated=!1,this.pageClass="rqf-page",this.addClass=function(a){a.preventDefault();var b=a.data.that;e.toggleClass(b.pageClass),b.input.attr("checked",e.hasClass(b.pageClass)),b.checkContent()},this.addViewportMeta=function(){0==a('meta[name="viewport"]').length&&a("head").append('<meta name="viewport" content="width=device-width, initial-scale=1">'),this.status=this.getStatus()},this.checkContent=function(){if(this.isRQF=e.hasClass(this.pageClass),document.cookie="rqf="+(this.isRQF?"true":"false"),this.updateContent(),this.isRQF){var a=this,c=b(function(){a.status!==a.getStatus()&&a.updateContent()},250);d.resize(c)}},this.updateContent=function(){function c(){var c="https://www.york.ac.uk/static/1.4/img/logo.png",f=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),i=!f,j=a("#location a"),l={logoFOI:"http://yorkfestivalofideas.com/media/news-and-events/york-festival-of-ideas/foi-logo.gif",logoConcertsPNG:"https://www.york.ac.uk/media/global/responsiveredesign/img/concerts-logo.png",logoConcertsSVG:"https://www.york.ac.uk/media/global/responsiveredesign/img/concerts-logo.svg"},m={FOI:"http://yorkfestivalofideas.com/",concerts:"http://yorkconcerts.co.uk/"};g===!0&&(c=l.logoFOI,j.attr("href",m.FOI),i=!0),h===!0&&(c=l.logoConcertsPNG,j.attr("href",m.concerts),a("#location > img").remove(),a("body").addClass("york-concerts-page"),i=!0),i&&a("#location a img, header img, #logo img").each(function(a,b){b.removeAttribute("width"),b.removeAttribute("height"),b.src=c,b.style.display="block",b.style.width="auto"}),k.length>0&&(""===a.trim(k.text())?k.remove():(e(),d.resize(b(function(){e()},250))))}function e(){j.css("padding-bottom","");var a=parseInt(j.css("padding-bottom"),10),b=k.outerHeight(),c=Math.max(a-b,0);k.css("position","static");var d=k.outerHeight();k.css("position","absolute"),j.css("padding-bottom",c+d)}function f(){var c=a("#breadcrumb");if(c.length>0){var e=a("#breadcrumb>ul>li>a>img");e[0].src.indexOf("home_white.gif")>-1&&e.attr("src","https://www.york.ac.uk/media/global/templateimages/home.gif"),c.each(function(c,e){function f(b){var c=a(e);c.removeClass("is-closed");var d=c.children("ul"),f=d.children("li"),g=d.height(),h=parseInt(f.css("line-height"),10),i=Math.floor(g/h),j=i>2;c.toggleClass("is-closed",j),j===!0&&($moreLink=a(f[2]).children("a"),$moreLink.one("click",function(a){a.preventDefault(),c.removeClass("is-closed")}))}f();var g=b(function(){f()},250);d.resize(g)})}}function i(){a("#university").length>0&&a("#university").prop("checked",!0)}var j=a("#location"),k=j.children("h1");this.contentUpdated||(c(),f(),i(),this.contentUpdated=!0),this.reorderContent(),this.resetContent()},this.reorderContent=function(){if(this.status!==this.getStatus())return this.status=this.getStatus(),"mobile"===this.status?("undefined"==typeof this.mobileContent&&(this.mobileContent=this.getMobileContent()),f.empty().append(this.mobileContent),d.trigger("contentUpdated.mobile"),this.mobileContent):"undefined"==typeof this.originalContent?"Do nothing":(f.empty().append(this.originalContent),d.trigger("contentUpdated.original"),this.originalContent)},this.resetContent=function(){this.resetHomepageBanner(),this.replaceTwitterWidget(),this.resetTabs(),this.resetAccordion(),this.courseButtons();var b=a(".gallery-lightbox a");b.length>0&&a.fn.lightBox&&a(".gallery-lightbox a").lightBox(),a("blockquote.quote p:first-child").removeClass("attribution"),a(".fb-page").length>0&&this.resetFacebook(),this.runScripts(),d.trigger("load"),a(".tabs").length>0&&d.trigger("hashchange")},this.courseButtons=function(){var b=a("#course-applying-content");a("#course-apply-now").click(function(c){c.preventDefault(),b.children("h3").hasClass("expanded")||b.find(".q").click(),a("html,body").animate({scrollTop:b.offset().top},700)}),a("#show-entry-reqs").click(function(c){c.preventDefault(),b.children("h3").hasClass("expanded")||b.find(".q").click(),a("html,body").animate({scrollTop:a("#entry-details").offset().top},700)})},this.runScripts=function(){a(".script-wrapper").each(function(b,c){var d=a(c);if(d.text().indexOf("document.write")===-1){var e=a("<script>").text(d.text()),f=d[0].attributes;a.each(f,function(a,b){e.attr(b.nodeName,b.nodeValue),a===f.length-1&&d.replaceWith(e)})}})},this.resetFacebook=function(){var b=setInterval(function(){try{if(!FB)return;a(".fb-page").removeAttr("fb-xfbml-state"),a(".fb-page").width("100%"),FB.XFBML.parse(),clearInterval(b)}catch(c){}},20)},this.resetHomepageBanner=function(){var b={fx:"fade",speed:1500,timeout:5e3,pause:!0,fit:1},c=a("#homepagebanner");if(c.length>0){if($imgs=c.find("img"),0===$imgs.length)return;var d=[],e=$imgs.map(function(b,c){var e=a(c),f=e.closest(".imagewithcaption"),g=e.next(".caption");0===g.length&&(g=f.find("p + p")),f.css("display","block");var h=e.height(),i=g.outerHeight();return d.push(i),f.css("display","none"),h}),f=Math.max.apply(null,e),g=Math.max.apply(null,d);c.cycle(b),f>0&&c.height(f);var h=parseInt(c.css("padding-bottom"),10);return h>0&&c.css("padding-bottom",g),!0}return!1},this.resetAccordion=function(){var b=f.find(".faq");if(b.length>0){a(".faq:first").before('<p class="showhide"><a href="#" class="show">Show all</a> / <a href="#" class="hide">Hide all</a></p>');var c=a(".q"),d=a(".a");c.attr("aria-expanded",!1),c.attr("tabindex",0),d.attr("tabindex",0),c.each(function(b,c){var d="acc-"+b;a(this).attr("aria-controls",d)}),d.each(function(b,c){var d="acc-"+b;a(this).attr("id",d)}),d.hide(),c.unbind("click"),c.click(this.clickAccordion),c.keypress(this.clickAccordion);var e=a("a.show");e.unbind("click"),e.click(function(){var b=a(".faq"),c=b.children(".a"),d=b.children(".q");return c.slideDown("fast"),d.attr("tabindex",-1),d.addClass("expanded"),d.attr("aria-expanded",!0),!1});var g=a("a.hide");g.unbind("click"),g.click(function(){var b=a(".faq"),c=b.children(".a"),d=b.children(".q");return c.slideUp("fast"),d.removeClass("expanded"),d.attr("aria-expanded",!1),!1})}};var j=!1;this.clickAccordion=function(b){return a(this).next().slideToggle("fast"),a(this).toggleClass("expanded"),j=!j,a(this).attr("aria-expanded",!!j),!1},this.resetTabs=function(){var b=f.find(".tabs");b.length>0&&(b.each(function(b,c){var d=a(c),e=(d.attr("id").substring(12),d.children("ul"));e.hasClass("tabNavigation")===!1&&e.addClass("tabNavigation");var f=e.find("a"),g=d.children("div");g.children(".tab").hide(),hashchange_handler=function(a){var b=window.location.hash;if(0===d.find('.currentTab a[name="'+b.substring(1)+'"] , .currentTab a[id="'+b.substring(1)+'"]').length){var c=f.first().attr("href");c=c.substring(c.indexOf("#"));var e=c;return g.filter(b).length>0&&(e=b),g.hide().removeClass("currentTab"),g.filter(e).show().addClass("currentTab"),f.removeClass("selected"),f.filter("[href="+e+"]").addClass("selected"),a&&a.preventDefault&&a.preventDefault(),!1}},a(window).on("hashchange",function(a){hashchange_handler(a)})}),hashchange_handler())},this.replaceTwitterWidget=function(){if(!this.twitterWidgetId)return!1;if("undefined"==typeof twttr)return!1;if(twttr.init!==!0)return!1;var b=a(".twitter-timeline-container");0===b.length?(b=a("<div>").addClass("twitter-timeline-container").attr({"data-widget-id":this.twitterWidgetId}),a(".twitter-timeline").replaceWith(b)):b.empty(),twttr.widgets.createTimeline(this.twitterWidgetId,b[0],{chrome:"noheader"})},this.prepareVideos=function(){var c=a("iframe[width][height]");c.each(function(b,c){var d=a(c),e=parseInt(d.attr("width"),10);"100%"===d.attr("width")&&(e=d.width());var f=parseInt(d.attr("height"),10),g=e/f;d.attr("data-aspect-ratio",g),d.attr("data-original-width",e)});var e=function(){c.each(function(b,c){var d=a(c),e=parseInt(d.attr("width"),10),f=d.width();0===f&&(f=e);var g=parseFloat(d.attr("data-aspect-ratio"));d.attr({height:f/g})})};d.resize(b(e,500)),e()},this.getMobileContent=function(){if("undefined"!=typeof this.mobileContent)return this.mobileContent;var b=new k(f),c=b.sections;if(this.originalContent=b.originalContent,c===!1)return!1;var d=a("<div>").addClass("col-mobile");return a.each(c,function(a,b){d.append(b)}),d},this.getStatus=function(){if(this.isRQF!==!0)return"desktop";var a=e.width();return a<588?"mobile":"desktop"},this.addSubnav=function(){var b=a("#lhcolumn"),c=a('<button hidden class="lhcolumnToggle" aria-controls="nav" aria-expanded="false">Show menu</button>');b.prepend(c),b.click(function(a){a.stopPropagation(),b.toggleClass("is-open"),c.attr("aria-expanded",b.hasClass("is-open")?"true":"false"),c.text(b.hasClass("is-open")?"Hide menu":"Show menu")}),d.click(function(a){b.removeClass("is-open"),c.attr("aria-expanded","false"),c.text("Show menu")})},this.fixFeedbackForm=function(){var b=a("#feedback"),c=a("#sitemap");b.length>0&&c.length>0&&c.before(b)},this.loadStaffStudentStyles=function(){c("https://www.york.ac.uk/static/rqf/rqf-staff.min.css")},this.cookieBanner=function(){function b(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var a=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",a}function c(a){for(var b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return!1}function d(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var f="expires="+d.toUTCString();document.cookie=a+"="+b+";"+f+";"+e()+"path=/"}function e(){var a=document.location.hostname;return a.indexOf("york.ac.uk")!=-1?"domain=.york.ac.uk;":""}function f(a){return"string"==typeof a&&"false"!==a}function g(){var b=a("body");b.length>0&&(b.append(n.replace("{0}",i)),b.addClass("has-c-cookie-banner"),a("#btnCloseCookieNotice").bind("click",function(c){c.preventDefault(),d(k,"true",365),a("#cookie-opt-in").hide(),b.removeClass("has-c-cookie-banner")}))}var h="https://www.york.ac.uk/about/legal-statements/cookies/",i='<div class="cookie-opt-in__content"><p>By continuing to use the site we assume you\'re happy with <a href="'+h+'">how we use cookies</a>.</p></div><div class="cookie-opt-in__dismiss"><a title="Dismiss this notification" href="#" id="btnCloseCookieNotice">&times;</a></div>',j=!1,k="cookie-banner-dismissed";if("undefined"!=typeof a&&b()){var l=c(k);try{j=l===!1||!f(l)}catch(m){j=!0}var n='<div id="cookie-opt-in">{0}</div>';document.getElementsByTagName("head")[0],document.createElement("link");j&&g()}},this.init=function(){this.addSubnav(),this.prepareVideos(),this.status="desktop";var b=a(".twitter-timeline");b.length>0&&(this.twitterWidgetId=b.attr("data-widget-id")),this.mobileContent=this.getMobileContent(),this.addViewportMeta(),i===!0&&this.fixFeedbackForm(),g===!0&&c("https://www.york.ac.uk/static/rqf/rqf-foi.css"),this.checkContent(),this.cookieBanner()}},k=function(b){this.getOffset=function(a,b){if(thisOffset=a.offset(),a.hasClass("right")||a.hasClass("left")){var c=parseFloat(a.css("margin-top"),10);thisOffset.top-=c}return!a.is("script")&&(thisOffset.top=Math.floor(thisOffset.top),thisOffset.left=Math.floor(thisOffset.left),thisOffset)},this.makeAccordion=function(b){var c=this,d=a("<div>").addClass("faq-container");b.children(".tabNavigation").find("a").map(function(e,f){var g=f.href.substring(f.href.indexOf("#")),h=b.find(g);0===h.length&&(h=b.find(g+"-content"));var i=new k(h),j="";a.map(i.contentBlocks,function(a,b){j+=a.html()}),h.empty().append(j),h.show().addClass("faq");var l=h.children("h2:first-child, h3:first-child, h4:first-child");l.replaceWith(function(){var b=a(this).html();return a("<h3>").addClass("q").html(b).click(c.clickAccordion)});var m=a("<div>").addClass("a").hide();h.children().not("h3.q").wrapAll(m),h.children("h3.q").prependTo(h),d.append(h)});return d},this.fixTable=function(b){var c=b.children("thead"),d=b.children("tbody"),e=a("<div>").addClass("table-container"),f=b[0].className,g=b.find("td[colspan], td[rowspan]").length;0===c.length&&(c=d);var h=c.children("tr:first-child"),i=h.children();if(i.length<3)return b.clone();if(g>0)return b.clone();var j=h.find("th").length>0;j===!0&&h.remove(),i.each(function(b,c){var d=a(c),e=d.attr("colspan")||1;if(e>1){d.attr("colspan",1);for(var f=a("<th>"),g=1;g<e;g++)i.splice(b+1,0,f.clone())}});var k=d.children("tr"),l=a("<tbody>"),m=a("<table>").append(l).addClass(f);return k.each(function(b,c){var d=a(c);if(!d.hasClass("is-hidden@mobile")){var e=a(k[b]).children();if(i.each(function(b,c){var d=a(c),f=a("<tr>");if(j){var g=a("<th>").html(d.html());f.append(g)}e[b]&&(thisColspan=parseInt(e[b].getAttribute("colspan"),10),thisColspan>1&&(e[b].removeAttribute("colspan"),e[b].setAttribute("rowspan",thisColspan)),f.append(e[b])),l.append(f)}),b<k.length){var f=a("<tr>").addClass("spacer-row");l.append(f)}}}),e.append(m),e},this.processContent=function(b){var c=b.clone(!0,!0);(b.is("#tabs")||b.is(".tabs"))&&(c=this.makeAccordion(c));var d=c.find("table");if(b.is("table"))c=this.fixTable(c);else if(d.length>0){var e=this;d.each(function(b,c){var d=a(c);$tableClone=e.fixTable(d),$tableClone.is(d)||d.replaceWith($tableClone)})}var f=c[0].style;return a.each(f,function(a,b){"float"===b&&(f["float"]="none")}),c},this.getSections=function(b){var c=b.find("script");c.each(function(b,c){var d=a(c),e=d.text(),f=a("<div>").text(e),g=d[0].attributes;a.each(g,function(a,b){f.attr(b.nodeName,b.nodeValue),a===g.length-1&&(f.addClass("script-wrapper").css("display","none"),d.replaceWith(f))})});var d=b.children();if(0===d.length)return!1;var e=d.find(".newline-narrow-gallery, .newline-wide-gallery");e.length>0&&e.remove(),this.originalContent=d.clone(!0),this.contentBlocks=[];var f=-1,g=this,h=function(b){var c=b.find(".rightBox");0!==c.length&&c.each(function(b,c){var d=a(c),e=d.parent();d.remove().appendTo(e)})},i=function(b,c){var d=a(c),e=g.processContent(d),i=d.parents(".col-half, .col-third").length>0?"col-half":"";if(g.isContentStart(d)||0===b){b>0&&h(g.contentBlocks[f]);var j=g.getOffset(d,f),k=a("<div>").addClass(i);j!==!1&&k.attr({"data-offset-top":j.top,"data-offset-left":j.left}),k.append(e),g.contentBlocks[++f]=k}else{g.contentBlocks[f];"SCRIPT"===e[0].nodeName?e[0].innerHTML.indexOf("document.write")===-1&&g.contentBlocks[f].append(e):g.contentBlocks[f].append(e)}};return d.each(function(b,c){var d=a(c);d.hasClass("col-half")||d.hasClass("col-third")?($contentChildren=d.children(),$contentChildren.each(i)):i(b,c)}),h(this.contentBlocks[f]),this.contentBlocks.sort(function(b,c){var d=a(b),e=a(c),f=d.attr("data-offset-top"),g=e.attr("data-offset-top");if(!f&&!g)return 0;if(f!==g)return f-g;if(d.hasClass("right")||d.hasClass("quote"))return-1;if(e.hasClass("right")||e.hasClass("quote"))return 1;var h=d.attr("data-offset-left"),i=e.attr("data-offset-left");return h!==i?h-i:0}),this.contentBlocks},this.isContentStart=function(b){var c=["h1","h2"],d=function(b){return b[0]&&a.inArray(b[0].nodeName.toLowerCase(),c)>-1},e=function(a){return a.hasClass("boxout")===!0||a.hasClass("boxoutAlt")===!0},f=function(a){return a.hasClass("faq-container")===!0},g=function(a){return"tabs"===a.attr("id")},h=function(a){var b=a.next();return 0!=b.length&&!!(a.hasClass("unpadded")&&a.find("img").length>0&&(d(b)||e(b)))},i=function(a){return!!((a.hasClass("left")||a.hasClass("right"))&&a.children("img").length>0)},j=b.prev()||!1;return!!h(b)||(!(!i(b)||d(j))||(d(b)?h(j)!==!0&&i(j)!==!0:e(b)&&b.children().length>0&&d(b.children().first())?h(j)!==!0&&!(j.length>0&&"img"===j[0].nodeName.toLowerCase()):!!f(b)||!!g(b)))},this.sections=this.getSections(b)},l=new j;l.init()})}window.jQuery?go():!function(a,b){var c=a.createElement(b),d=a.getElementsByTagName(b)[0];c.src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js",c.onload=function(){go()},d.parentNode.insertBefore(c,d)}(document,"script");